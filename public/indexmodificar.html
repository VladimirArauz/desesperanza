<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Editar Pan</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>

<body class="container p-5">

<h2>Editar Pan</h2>

<form id="formEditar" class="card p-4">
    <label class="form-label">Nombre del Pan</label>
    <input type="text" name="nombre" id="nombre" class="form-control" required>

    <label class="form-label mt-3">Costo</label>
    <input type="number" name="costo" step="0.01" id="costo" class="form-control" required>

    <label class="form-label mt-3">Descripción</label>
    <textarea name="descripcion" id="descripcion" class="form-control" required></textarea>

    <button class="btn btn-primary mt-4">Guardar Cambios</button>
</form>

<br>
<a href="catalogo.html" class="btn btn-secondary">Cancelar</a>

<script>
// ✅ Obtener el ID de la URL
const params = new URLSearchParams(window.location.search);
const id = params.get('id');

// ✅ Cargar datos del pan actual
fetch('/panes')
.then(res => res.json())
.then(lista => {
    const pan = lista.find(p => p.id == id);
    document.getElementById('nombre').value = pan.nombre;
    document.getElementById('costo').value = pan.costo;
    document.getElementById('descripcion').value = pan.descripcion;
});

// ✅ Guardar cambios
document.getElementById('formEditar').addEventListener('submit', e => {
    e.preventDefault();

    const datos = new FormData(e.target);

    fetch(`/modificar/${id}`, {
        method: "POST",
        body: datos
    }).then(() => {
        window.location.href = "catalogo.html";
    });
});
</script>

</body>
</html>
